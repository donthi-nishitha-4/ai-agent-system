<!DOCTYPE html>
<html>
<head>
  <title>AI Agent Framework</title>
  <style>
    body { font-family: Arial; margin: 40px; }
    textarea { width: 100%; height: 100px; font-size: 14px; }
    button { padding: 10px; margin-top: 10px; }
    pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
    .hint { color: #555; font-size: 13px; margin-top: 10px; }
  </style>
</head>
<body>

<h2>AI Agent Framework</h2>

<textarea id="goal" placeholder="Example: CALCULATOR (25*4)/5"></textarea>
<br>
<button onclick="runAgent()">Run Agent</button>

<div class="hint">
<b>Input examples:</b><br>
CALCULATOR (25*4)/5<br>
GCD 12 18<br>
LCM 12 18<br>
RANDOM_FACT<br>
CALENDAR 26-01-2026<br>
FIBONACCI 7
</div>

<pre id="output"></pre>

<script>
async function runAgent() {
  const goal = document.getElementById("goal").value.trim();
  const output = document.getElementById("output");

  if (!goal) {
    output.innerText = "❌ Please enter a goal.";
    return;
  }

  output.innerText = "⏳ Running agent...";

  try {
    const res = await fetch("/run", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ goal })
    });

    const data = await res.json();

    if (!res.ok || data.error) {
      output.innerText = "❌ Error: " + (data.error || "Unknown error");
    } else {
      output.innerText = data.result;
    }

  } catch (err) {
    output.innerText = "❌ Server error: " + err.message;
  }
}
</script>

</body>
</html>
